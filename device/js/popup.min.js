var linkForm=document.querySelector(".write-us-link"),popupForm=document.querySelector(".modal-write-us"),closeForm=popupForm.querySelector(".modal-close"),form=popupForm.querySelector("form"),userName=popupForm.querySelector("[name=name]"),userEmail=popupForm.querySelector("[name=email]"),userText=popupForm.querySelector("[name=text]"),linkMap=document.querySelector(".contacts-map"),popupMap=document.querySelector(".modal-map"),closeMap=popupMap.querySelector(".modal-close"),isStorageSupport=!0,storage={name:"",email:""};try{storage.name=localStorage.getItem("userName"),storage.email=localStorage.getItem("userEmail")}catch(e){isStorageSupport=!1}linkForm&&linkForm.addEventListener("click",function(e){e.preventDefault(),popupForm.classList.add("modal-show"),storage.name?(userName.value=storage.name,storage.email?(userEmail.value=storage.email,userText.focus()):userEmail.focus()):userName.focus()}),closeForm.addEventListener("click",function(e){e.preventDefault(),popupForm.classList.remove("modal-show"),popupForm.classList.remove("modal-error")}),form.addEventListener("submit",function(e){userName.value&&userEmail.value&&userText.value?isStorageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("userEmail",userEmail.value)):(e.preventDefault(),popupForm.classList.remove("modal-error"),popupForm.offsetWidth=popupForm.offsetWidth,popupForm.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupForm.classList.contains("modal-show")&&(popupForm.classList.remove("modal-show"),popupForm.classList.remove("modal-error")),popupMap.classList.contains("modal-show")&&popupMap.classList.remove("modal-show"))}),linkMap&&linkMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.add("modal-show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.remove("modal-show")});var sliders=document.querySelectorAll(".slider-item");if(0!==sliders.length){var slidersNav=document.querySelector(".slider-nav"),activeSlider=document.querySelector(".slider-show"),sliderLinkWrapper=activeSlider.querySelector(".slider-link-wrapper");document.querySelector(".slider-nav").remove,sliderLinkWrapper.appendChild(slidersNav),slidersNav.addEventListener("click",function(e){var r=e.target;if(r.classList.contains("slider-checkbox")){document.querySelector(".slider-nav").remove();for(var t=r.id.split("-")[1],o=0;o<sliders.length;o++)sliders[o].classList.remove("slider-show");sliders[t-1].classList.add("slider-show"),activeSlider=sliders[t-1],(sliderLinkWrapper=activeSlider.querySelector(".slider-link-wrapper")).appendChild(slidersNav),slidersNav.querySelector("input:checked").focus()}})}var services=document.querySelectorAll(".services-description > div");if(0!==services.length){var servicesNav=document.querySelector(".services-nav"),servicesTab=document.querySelectorAll(".services-tab");servicesNav.addEventListener("click",function(e){e.preventDefault();var r=e.target;if(r.classList.contains("services-link")){for(var t=r.parentElement,o=0;o<services.length;o++)services[o].classList.remove("service-show"),servicesTab[o].classList.remove("current");var s=".services-description-"+r.id.split("-")[0];document.querySelector(s).classList.add("service-show"),t.classList.add("current")}})}var line=document.querySelector(".price-controls");if(line){var bar=document.querySelector(".bar"),minPrice=document.querySelector("input[name='min-price']"),maxPrice=document.querySelector("input[name='max-price']"),point1=document.querySelector(".range-toggle-min"),point2=document.querySelector(".range-toggle-max"),coordsLine=line.getBoundingClientRect(),maxPriceValue=9e3,pixelPriceValue=maxPriceValue/line.clientWidth,downTarget="",mouseDown=function(e){downTarget=e.target;var r=e.clientX-downTarget.getBoundingClientRect().left,t=function(e){minPrice.style.pointerEvents="none",maxPrice.style.pointerEvents="none";var t=point1.getBoundingClientRect(),o=point2.getBoundingClientRect(),s=coordsLine.left-t.width/2,i=s-coordsLine.left,a=o.left-t.width,l=t.left+t.width,n=l-coordsLine.left,c=coordsLine.right-o.width/2,u=e.clientX-r,d=function(e,r,o,s){u>=e&&u<=o&&(downTarget.style.left=u-coordsLine.left+"px"),u<e&&(downTarget.style.left=r+"px"),u>o&&(downTarget.style.left=o-coordsLine.left-2+"px"),bar.style.left=point1.offsetLeft+t.width/2+"px",bar.style.width=point2.offsetLeft-point1.offsetLeft+"px"};downTarget.classList.contains("range-toggle-min")&&d(s,i,a),downTarget.classList.contains("range-toggle-max")&&d(l,n,c),minPrice.value=(point1.offsetLeft-i)*pixelPriceValue,maxPrice.value=(point2.offsetLeft+point2.offsetWidth/2)*pixelPriceValue};document.addEventListener("mousemove",t),document.addEventListener("mouseup",function(){downTarget="",document.removeEventListener("mousemove",t),minPrice.style.pointerEvents="auto",maxPrice.style.pointerEvents="auto"})};line.addEventListener("mousedown",mouseDown),line.ondragstart=function(){return!1}}